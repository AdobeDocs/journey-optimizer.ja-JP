---
solution: Journey Optimizer
product: journey optimizer
title: 平日にのみメールを送信
description: Adobe Journey Optimizerで平日にのみメールを送信するようにジャーニーを設定する方法を説明します
feature: Journeys, Use Cases, Email
topic: Content Management
role: User
level: Intermediate
keywords: ジャーニー，ユースケース，平日，条件，メール，スケジュール
version: Journey Orchestration
hide: true
hidefromtoc: true
source-git-commit: ad902c1055ea2e883c028172297aab878a898b94
workflow-type: tm+mt
source-wordcount: '1121'
ht-degree: 0%

---

# 平日にのみメールを送信 {#send-emails-only-on-weekdays}

このユースケースでは、平日（月曜日から金曜日）にのみメールを送信するジャーニーをAdobe Journey Optimizerで設定する方法を示します。 週末（土曜日または日曜日）にジャーニーにエントリするプロファイルの場合、メールは自動的にキューに入り、指定した時間に月曜日に送信されます。 これにより、平日にメッセージを配信することで、最適なエンゲージメントを確保できます。

## ユースケースの概要

**課題**：プロファイルが週末にジャーニーにエントリする場合でも、メールが平日にのみ送信されるようにすることです。 週末のエントリの場合は、メールをキューに入れ、特定の時間に月曜日に送信する必要があります。

**解決策**：条件アクティビティを使用して、曜日を特定します。 週末のエントリの場合、カスタム式を使用してアクティビティを待機すると、メールは月曜日まで遅れます。 平日のエントリは、メール送信手順に直接進みます。

このアプローチでは、条件アクティビティを使用して、現在の日付が土曜日か日曜日かを確認し、週末のエントリ用のカスタム式で待機アクティビティを実装し、月曜日の配信に対する週末のメールを特定の時間にキューに入れ、平日のエントリ（月曜日から金曜日）に直ちにメールを送信する方法を示します。

このアプローチは、B2B メールキャンペーン、プロのニュースレターやコミュニケーション、ビジネス関連のお知らせ、仕事関連の製品アップデート、週末の配信が望ましくないマーケティングキャンペーンなどに最適です。

➡️ 詳しい手順については、[ ビデオチュートリアル ](#how-to-video) を参照してください

>[!NOTE]
>
>このユースケースを実装するには、ジャーニーをトリガーし、[ ジャーニー条件 ](../configuration/channel-surfaces.md) と [ 式 ](../audience/about-audiences.md) の基本的な理解を持つ、設定済みの [ メールチャネルサーフェス ](../event/about-events.md)、[ オーディエンス ](condition-activity.md) または [ イベント ](expression/expressionadvanced.md) を持つアクティブなAdobe Journey Optimizer インスタンスが必要です。


## 実装手順

### 手順 1：ジャーニーの作成

1. Adobe Journey Optimizerの **[!UICONTROL ジャーニー管理]** / **[!UICONTROL ジャーニー]** に移動します。

1. **[!UICONTROL ジャーニーを作成]** をクリックして、新規のジャーニーを作成します。 [ ジャーニー作成の詳細情報 ](journey-gs.md)

1. [ ジャーニープロパティ ](journey-properties.md) を設定します。

1. ジャーニーのエントリポイントを選択：
   * **[オーディエンスを読み取り](read-audience.md)**：特定のオーディエンスをターゲティングするバッチキャンペーンの場合
   * **[イベント](../event/about-events.md)**：顧客の行動に基づいてリアルタイムトリガーされるジャーニーの場合

### 手順 2：条件アクティビティを追加して、曜日を確認する

ジャーニーが開始された直後に、条件を追加して、現在の日付が土曜日か日曜日かを確認します。 これにより、それに応じてワークフローが分岐されます。

1. **[!UICONTROL 条件]** アクティビティを、エントリポイントの後のキャンバスにドラッグ&amp;ドロップします。 [ 条件アクティビティの詳細はこちらを参照 ](condition-activity.md)

1. 条件アクティビティをクリックして、設定パネルを開きます。

1. 条件タイプとして **[!UICONTROL 時間条件]** を選択します。

1. 時間のフィルタリングオプションとして **曜日** を選択します。

1. **最初のパス（土曜日）** に対しては、「**土曜日** のみを選択します。 このパスに「Saturday」というラベルを付けます。

1. 「**[!UICONTROL パスを追加]**」をクリックして、2 番目の条件を作成します。

1. **2 番目のパス（日曜日）** には、**曜日** を選択し、**日曜日** のみを選択します。 このパスに「Sunday」というラベルを付けます。

   ![ 式エディターでの土曜日と日曜日の条件の設定 ](assets/weekday-email-uc-condition-expression.png)


1. **[!UICONTROL 上記以外の事例のパスを表示]** にチェックを入れて、平日（月曜日～金曜日）のエントリのパスを作成します。

>[!NOTE]
>
>曜日の評価に使用されるタイムゾーンは、条件レベルではなく、ジャーニープロパティのジャーニーレベルで定義されます。 式で使用されるジャーニータイムゾーンは、受信者ではなく、ジャーニーで設定されたタイムゾーンです。[ タイムゾーン管理の詳細情報 ](timezone-management.md)。

### 手順 3：週末のエントリに対する待機アクティビティの設定

土曜日または日曜日に入力するプロファイルの場合、カスタム式を使用した待機アクティビティを使用して、希望する時間に月曜日までメールを遅らせます。

待機アクティビティで、次の式を使用します。

```javascript
toDateTimeOnly(setHours(nowWithDelta(X, "days"), H))
```

次のとおりです。

* **X** は、待機する日数です。
   * 土曜日（月曜日まで待つ）は **2** を使用してください
   * 日曜日（月曜日まで待つ）は **1** を使用してください
* **H** は送信する時間です（例：午前 9 時は **9**）


**土曜日の例：**

```javascript
toDateTimeOnly(setHours(nowWithDelta(2, "days"), 9))
```

**日曜日の例：**

```javascript
toDateTimeOnly(setHours(nowWithDelta(1, "days"), 9))
```

これをジャーニーに実装するには：

1. **土曜日のパス** で、条件の後に **[!UICONTROL 待機]** アクティビティを追加します。

1. 待機タイプとして **[!UICONTROL 期間]** を選択します。

1. **[!UICONTROL 詳細設定モード]** をクリックして、カスタム式を入力します。

1. Enter: `toDateTimeOnly(setHours(nowWithDelta(2, "days"), 9))`

   ![ 土曜日、日曜日、平日の 3 つの条件のパスを持つジャーニー](assets/weekday-email-uc-paths.png)

1. **を使用して、** 日曜日のパス `toDateTimeOnly(setHours(nowWithDelta(1, "days"), 9))` に対して同じ手順を繰り返します。

>[!TIP]
>
>より複雑な営業時間（例：平日の午前 9 時から午後 5 時までのみ送信）の場合は、式と条件をさらに強化できます。

### 手順 4：平日ブランチ

月曜日から金曜日に入力するプロファイルの場合、通常どおりメール送信手順に進みます。

1. **平日のパス** （「その他のケース」パス）で、**[!UICONTROL メール]** アクションアクティビティの追加に直接進みます。 平日のエントリには、待機アクティビティは必要ありません。

1. 必要に応じて、メールメッセージを設定します。

### 手順 5：ジャーニーフローの完了

土曜日と日曜日のパスの両方での待機アクティビティの後、3 つのパス（土曜日、日曜日、平日）はすべて同じメール アクションアクティビティに送られる必要があります。 メールの後に **[!UICONTROL 終了]** アクティビティを追加します。

### ビジュアルワークフローの概要

完全なジャーニーワークフローは、次のロジックに従います。

* **開始** →**条件：土曜日ですか、日曜日ですか。**
   * **はい（土曜日）:** 月曜日の午前 9 時まで待ってメール→送信します
   * **はい（日曜日）:** 月曜日の午前 9 時まで待ってメール→送信します
   * **いいえ（月曜日から金曜日）:** すぐにメールを送信する

これにより、すべてのメールが平日にのみ送信され、週末のエントリが月曜日の配信用に自動的にキューに入れられます。

### 手順 6：ジャーニーのテスト

公開する前に、Adobe Journey Optimizerのテストモードでジャーニーロジックを十分にテストして、すべてが期待どおりに動作することを確認します。

1. 右上隅の **[!UICONTROL テスト]** ボタンをクリックします。

1. テストモードを有効にします。 [ ジャーニーのテスト方法を学ぶ ](testing-the-journey.md)

1. 様々な曜日のシミュレーションエントリ時間を使用して [ テストプロファイル ](../audience/creating-test-profiles.md) を作成します。
   * **土曜日エントリ**：プロファイルが土曜日のパスに従い、待機し、指定した時間に月曜日にメールを受信することを確認します
   * **日曜日のエントリ**：プロファイルが日曜日のパスに従い、待機し、指定した時間に月曜日にメールを受信することを確認します
   * **月曜日から金曜日のエントリ**：待機せずにメールがすぐに送信されることを確認します

1. ジャーニーのビジュアライゼーションを確認し、プロファイルが正しい条件付きパス（土曜日、日曜日または平日）に従っていることを確認します。

1. ジャーニー内のエラーや警告を確認します。 [ ジャーニーのトラブルシューティングについて説明します ](troubleshooting.md)

1. 待機の数式で、希望する月曜日の配信時間の正しい期間が計算されていることを確認します。

>[!IMPORTANT]
>
>常にテストモードでジャーニーロジックをテストして、待機アクティビティが期待どおりに動作することを確認します。 テストモードを使用して様々なエントリシナリオをシミュレートし、週末のエントリが月曜の配信のキューに正しく入っていることを検証します。 [ ジャーニーテストのベストプラクティスについて詳しくは、こちらを参照してください ](testing-the-journey.md)

### 手順 7：ジャーニーの公開

テストが完了したら、次の手順を実行します。

1. 右上隅の **[!UICONTROL 公開]** をクリックします。

1. 公開を確認します。 [ ジャーニーの公開の詳細情報 ](publish-journey.md)

1. [ジャーニーレポート ](report-journey.md) および [ ライブレポート ](../reports/journey-live-report.md) を使用して、ジャーニーのパフォーマンスを監視します。


## 関連トピック

* [ 条件アクティビティについて ](condition-activity.md) - ジャーニーで様々なパスを作成する方法を説明します
* [ ジャーニーでの条件の使用 ](conditions.md) - ジャーニー条件の詳細ガイド
* [ 待機アクティビティ ](wait-activity.md) – 待機時間と数式を設定します
* [ 日付関数 ](functions/date-functions.md) – 日付と時刻の関数の完全なリファレンス
* [ 式エディター ](expression/expressionadvanced.md) – 複雑な式の作成
* [ジャーニーのベストプラクティス ](journey-gs.md#best-practices) - ジャーニーデザインの推奨アプローチ
* [ コミュニティブログ投稿：平日のみメールを送信する方法 ](https://experienceleaguecommunities.adobe.com/t5/journey-optimizer-blogs/how-to-send-emails-only-on-weekdays-in-adobe-journey-optimizer/ba-p/760400){target="_blank"} – 詳細な例を含む元のブログ投稿

