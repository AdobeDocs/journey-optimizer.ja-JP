---
solution: Journey Optimizer
product: journey optimizer
title: 平日にのみメールを送信
description: Adobe Journey Optimizer で平日にのみメールを送信するジャーニーの設定方法について説明します
feature: Journeys, Use Cases, Email
topic: Content Management
role: User
level: Intermediate
keywords: ジャーニー, ユースケース, 平日, 条件, メール, スケジュール
version: Journey Orchestration
hide: true
hidefromtoc: true
source-git-commit: 9b3c9f7c0327c8c3c3d2b7f1b4255b7e1457a51e
workflow-type: ht
source-wordcount: '1070'
ht-degree: 100%

---

# 平日にのみメールを送信 {#send-emails-only-on-weekdays}

このユースケースでは、Adobe Journey Optimizer で平日（月曜日から金曜日）にのみメールを送信するジャーニーの設定方法を示します。週末（土曜日または日曜日）にジャーニーにエントリするプロファイルの場合、メールは自動的にキューに追加され、月曜日の指定した時刻に送信されます。これにより、平日にメッセージを配信することで、最適なエンゲージメントが確保されます。

## ユースケースの概要

**課題**：プロファイルが週末にジャーニーにエントリする場合でも、メールが平日にのみ送信されるようにします。週末のエントリの場合、メールはキューに追加され、月曜日の特定の時刻に送信される必要があります。

**解決策**：条件アクティビティを使用して、曜日を特定します。週末のエントリの場合、カスタム数式を使用した待機アクティビティにより、メールが月曜日まで遅延されます。平日のエントリは、メールの送信手順に直接進みます。

このアプローチでは、条件アクティビティを使用して、現在の日が土曜日か日曜日かを確認し、週末のエントリに対してカスタム数式を使用して待機アクティビティを実装し、月曜日の特定の時間に配信されるように週末のメールをキューに追加して、平日のエントリ（月曜日～金曜日）に対してすぐにメールを送信する方法を示します。

このアプローチは、企業間（B2B）メールキャンペーン、プロフェッショナルなニュースレターやコミュニケーション、ビジネス関連のお知らせ、仕事関連の製品アップデート、週末の配信が望ましくないマーケティングキャンペーンに最適です。

>[!NOTE]
>
>このユースケースを実装するには、[メールチャネルサーフェス](../configuration/channel-surfaces.md)が設定されたアクティブな Adobe Journey Optimizer インスタンス、ジャーニーをトリガーする[オーディエンス](../audience/about-audiences.md)または[イベント](../event/about-events.md)、[ジャーニー条件](condition-activity.md)と[式](expression/expressionadvanced.md)に関する基本的な理解が必要です。


## 実装手順

### 手順 1：ジャーニーを作成

1. Adobe Journey Optimizer で、**[!UICONTROL ジャーニー管理]**／**[!UICONTROL ジャーニー]**&#x200B;に移動します。

1. 「**[!UICONTROL ジャーニーを作成]**」をクリックして、[新しいジャーニーを作成](journey-gs.md)します。

1. [ジャーニープロパティ](journey-properties.md)を設定します。

1. ジャーニーエントリポイントを選択します。
   * **[オーディエンスを読み取り](read-audience.md)**：特定のオーディエンスをターゲティングするバッチキャンペーンの場合
   * **[イベント](../event/about-events.md)**：顧客行動に基づいてリアルタイムでトリガーされるジャーニーの場合

### 手順 2：曜日を確認する条件アクティビティを追加

ジャーニーの開始直後に、現在の日が土曜日か日曜日かを確認する&#x200B;**[!UICONTROL 条件]**&#x200B;アクティビティを追加します。これにより、ワークフローがそれに応じて分岐します。

1. [**[!UICONTROL 条件&#x200B;]**アクティビティ](condition-activity.md)をエントリポイントの後のキャンバスにドラッグ＆ドロップします。

1. **[!UICONTROL 条件]**&#x200B;アクティビティをクリックして、設定パネルを開きます。

1. 「**[!UICONTROL 時間条件]**」を条件タイプとして選択します。

1. 「**[!UICONTROL 曜日]**」を時間フィルタリングオプションとして選択します。

1. **最初のパス（土曜日）**&#x200B;では、「**土曜日**」のみを選択します。このパスに「土曜日」というラベルを付けます。

1. 「**[!UICONTROL パスを追加]**」をクリックして、2 番目の条件を作成します。

1. **2 番目のパス（日曜日）**&#x200B;では、「**[!UICONTROL 曜日]**」を選択し、「**日曜日**」のみを選択します。このパスに「日曜日」というラベルを付けます。

   ![式エディターでの土曜日と日曜日の条件の設定](assets/weekday-email-uc-condition-expression.png)


1. 「**[!UICONTROL 上記以外の事例のパスを表示]**」をオンにして、平日（月曜日〜金曜日）のエントリのパスを作成します。

>[!NOTE]
>
>曜日の評価に使用されるタイムゾーンは、条件レベルではなく、ジャーニープロパティのジャーニーレベルで定義されます。数式で使用されるジャーニーの[タイムゾーン](timezone-management.md)は、受信者のタイムゾーンではなく、ジャーニーに設定されたタイムゾーンです。

### 手順 3：週末のエントリに対する待機アクティビティを設定

土曜日または日曜日にエントリするプロファイルの場合は、カスタム数式を利用した&#x200B;**[!UICONTROL 待機]**&#x200B;アクティビティを使用して、メールを月曜日の目的の時間まで遅延させます。

**[!UICONTROL 待機]**&#x200B;アクティビティで、次の数式を使用します。

```javascript
toDateTimeOnly(setHours(nowWithDelta(X, "days"), H))
```

ここで：

* **X** は待機する日数です。
   * 土曜日の場合は **2** を使用します（月曜日まで待機します）。
   * 日曜日の場合は **1** を使用します（月曜日まで待機します）。
* **H** は送信する時間です（例：午前 9 時の場合は **9**）。


**土曜日の例：**

```javascript
toDateTimeOnly(setHours(nowWithDelta(2, "days"), 9))
```

**日曜日の例：**

```javascript
toDateTimeOnly(setHours(nowWithDelta(1, "days"), 9))
```

これをジャーニーに実装するには：

1. **土曜日のパス**&#x200B;で、条件の後に&#x200B;**[!UICONTROL 待機]**&#x200B;アクティビティを追加します。

1. 「**[!UICONTROL 期間]**」を待機タイプとして選択します。

1. 「**[!UICONTROL 詳細設定モード]**」をクリックして、カスタム数式を入力します。

1. `toDateTimeOnly(setHours(nowWithDelta(2, "days"), 9))` と入力します。

   ![土曜日、日曜日、平日の 3 つの条件のパスを含むジャーニー](assets/weekday-email-uc-paths.png)

1. **日曜日のパス**&#x200B;に対しても同じ手順を繰り返し、`toDateTimeOnly(setHours(nowWithDelta(1, "days"), 9))` を使用します。

>[!TIP]
>
>より複雑な営業時間（例：平日の午前 9 時から午後 5 時までのみ送信）の場合は、数式と条件をさらに強化できます。

### 手順 4：平日の分岐

月曜日から金曜日にエントリするプロファイルの場合は、通常どおりメール送信手順に進みます。

1. **平日のパス**（「その他の事例」のパス）では、**[!UICONTROL メール]**&#x200B;アクションアクティビティの追加に直接進みます。平日のエントリの場合、**[!UICONTROL 待機]**&#x200B;アクティビティは必要ありません。

1. 必要に応じて、メールメッセージを設定します。

### 手順 5：ジャーニーフローを完了

土曜日と日曜日の両方のパスの&#x200B;**[!UICONTROL 待機]**&#x200B;アクティビティの後、3 つのパス（土曜日、日曜日、平日）すべてが同じ&#x200B;**[!UICONTROL メール]**&#x200B;アクションアクティビティにフローする必要があります。メールの後に&#x200B;**[!UICONTROL 終了]**&#x200B;アクティビティを追加します。

### 視覚的なワークフローの概要

完全なジャーニーワークフローは、次のロジックに従います。

* **開始** → **[!UICONTROL 条件]**：土曜日ですか、日曜日ですか？
   * **はい（土曜日）：**&#x200B;月曜日の午前 9 時まで&#x200B;**[!UICONTROL 待機]** → **[!UICONTROL メールを送信]**
   * **はい（日曜日）：**&#x200B;月曜日の午前 9 時まで&#x200B;**[!UICONTROL 待機]** → **[!UICONTROL メールを送信]**
   * **いいえ（月曜日～金曜日）：**&#x200B;すぐに&#x200B;**[!UICONTROL メールを送信]**

これにより、すべてのメールが平日にのみ送信され、週末のエントリは月曜日の配信用にキューに自動的に追加されます。

### 手順 6：ジャーニーをテスト

公開前に、Adobe Journey Optimizer のテストモードでジャーニーロジックを徹底的にテストし、すべてが期待どおりに動作することを確認します。

1. 右上隅の「**[!UICONTROL テスト]**」ボタンをクリックします。

1. [テストモード](testing-the-journey.md)を有効にします。

1. 異なる曜日のエントリ時間をシミュレートした[テストプロファイル](../audience/creating-test-profiles.md)を作成します。
   * **土曜日のエントリ**：プロファイルが土曜日のパスに従って、待機し、月曜日の指定時間にメールを受信することを確認します
   * **日曜日のエントリ**：プロファイルが日曜日のパスに従って、待機し、月曜日の指定時間にメールを受信することを確認します
   * **月曜日から金曜日のエントリ**：メールが待機なしですぐに送信されることを確認します

1. ジャーニーのビジュアライゼーションを確認し、プロファイルが正しい条件パス（土曜日、日曜日、平日）に従っていることを確認します。

1. ジャーニー内の[エラーまたは警告](troubleshooting.md)を確認します。

1. 待機の数式が目的の月曜日の配信時間に対して正しい期間を計算していることを確認します。

>[!IMPORTANT]
>
>待機アクティビティが期待どおりに動作することを確認するために、常にテストモードでジャーニーロジックをテストします。テストモードを使用して、様々なエントリシナリオをシミュレートし、週末のエントリが月曜日の配信用にキューに正しく追加されていることを検証します。詳しくは、[ジャーニーテストのベストプラクティス](testing-the-journey.md)を参照してください。

### 手順 5：ジャーニーを公開

テストが完了したら、次の手順に従います。

1. 右上隅の「**[!UICONTROL 公開]**」をクリックします。

1. [公開](publish-journey.md)を確認します。

1. [ジャーニーレポート](report-journey.md)と[ライブレポート](../reports/journey-live-report.md)を使用して、ジャーニーのパフォーマンスを監視します。


## 関連トピック

* [条件アクティビティ](condition-activity.md) - ジャーニーで様々なパスを作成する方法について説明します
* [ジャーニーでの条件の使用](conditions.md) - ジャーニーの条件に関する詳細なガイド
* [待機アクティビティ](wait-activity.md) - 待機時間と数式を設定します
* [日付関数](functions/date-functions.md) - 日付と時刻の関数に関する完全なリファレンス
* [式エディター](expression/expressionadvanced.md) - 複雑な式を作成します
* [ジャーニーのベストプラクティス](journey-gs.md#best-practices) - ジャーニーデザインの推奨アプローチ
