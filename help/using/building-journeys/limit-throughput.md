---
solution: Journey Optimizer
title: 外部データソースおよびカスタムアクションによるスループットの制限
description: 外部データソースおよびカスタムアクションによるスループットの制限
exl-id: 45d6bb82-88ea-4510-a023-a75a82cc6f7b
source-git-commit: 8d56e3060e78422b028ced17f415497789908ff9
workflow-type: tm+mt
source-wordcount: '672'
ht-degree: 0%

---

# 用途: 外部データソースおよびカスタムアクションを使用したスループットの制限{#limit-throughput}

## ユースケースの説明

Adobe の旅オプティマイザーにより、カスタムアクションやデータソースを使用して、スタッフが外部システムに API 呼び出しを送信することができます。

これには、次の操作を行います。

* **データソース** : 外部システムから情報を収集し、その情報を旅のコンテキストで使用するには、例えば、profile 市に関する気象情報を取得し、それに基づいて専用フローが設定されている必要があります。

* **カスタムアクション** : 外部システムに情報を送信するために使用されます。例えば、プロファイル情報とともに、プロファイル情報、オーディエンスデータおよび旅のコンテキストに関する旅オプティマイザーの調整機能を使用して、外部システムに電子メールを送信することができます。

外部データソースまたはカスタムアクションを使用している場合は、その外部システムを保護するために、journeys では、1つの2万ユニタリで最大5000インスタンス、1秒間に最大インスタンスを選択します。 このような外部システムの過負荷を防止するために、終了時のオプティマイザーの「上限」機能を使用して、上限値を設定することができます。 ただし、上限に達した後の残りのすべての要求は削除されます。

この節では、スループットを最適化するために使用できる回避策について説明します。 外部システムとの統合方法について詳しくは、この [ ページ ](../configuration/external-systems.md) を参照してください。

## 実装

セグメントトリガ journeys **につい** ては、旅のスループットに影響を与える、セグメントの読み取りの制限レートを定義することができます。[詳細を読む](../building-journeys/read-segment.md)

![](assets/limit-throughput-1.png)

この値は、1秒間に500から 20 000 インスタンスに修正できます。 500/s よりも小さくする必要がある場合は、「分割率」条件を追加して、複数のブランチに分割し、特定の時間に実行されるようにすることもできます。

![](assets/limit-throughput-2.png)

**Journeys** では、10 000 のプロファイル **を作成して、100の** 要求/秒 **をサポート** する外部システムにデータを送信するという、セグメントによってトリガーされる機能について説明します。

1. 1秒あたりのスループット500のプロファイルを読み取るように読み取りセグメントを定義することができます。つまり、すべてのプロファイルの読み取りに20秒かかります。 第2の1番目では、500を読み取り、2番目の 2 500 をさらに読み取ることができます。

1. 次に、「% split」条件を追加することで、各分岐の100プロファイルを20% 分割します。

1. その後、各ブランチで特定のタイマーが付いた待機アクティビティーを追加します。 ここでは、1つごとに30秒の待機を設定しています。 1秒間に100プロファイルが各ブランチに送られます。

   * ブランチ1では、30秒間待機します。つまり、次のようになります。
      * 第2の1に100プロファイルが秒間待機します。
      * 第2の2番目の100プロファイルは、2番目の32を待機します。
   * ブランチ2では、60秒間待ち、次のことを意味します。
      * 第2の1に100のプロファイルは、2番目の61を待機することになります。
      * 第2の2番目の100プロファイルは、2番目の 62 (1 「02」) などを待機します。
   * すべてのプロファイルを読み取るのには最大20秒と予想されますが、2番目の分岐は、プロファイルが条件に入る最後の1つです。 2 ~ 51 2 秒間は、ブランチ1のすべてのプロファイルが処理されます。 第 2 61 (1 &quot;01&quot;) から2番目の 81 (1 &#39; 21 &quot;) までの間は、ブランチ2のすべてのプロファイルが処理されます。など

   * 特に外部システムが100要求/秒をサポートしている場合は、6番目のブランチをブランチあたり100より小さくすることもできます。



>[!IMPORTANT]
>
>どのような場合でも、実際に問題が解決されない場合は、その解決策を徹底的にテストしてください。

追加の gu鉄道は、上限機能を使用することもできます。

>[!NOTE]
>
>Journeys は、サンドボックスのすべての機能にグローバル化することで、エンドポイントを保護する上限とは異なり、この回避策は、旅レベルでのみ機能します。 これは、複数の journeys が並列で実行されていて、同じエンドポイントを対象としている場合は、旅をデザインする際に、その点について考慮する必要があることを意味します。 したがって、この回避策はすべてのユースケースには適していません。
