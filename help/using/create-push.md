---
title: プッシュ通知の設定
description: Journey Optimizer でプッシュ通知を作成する方法を説明します
source-git-commit: 9ea3f4eb7767f9ad4c608d9c28d9ee7ca4bb8e3b
workflow-type: tm+mt
source-wordcount: '1213'
ht-degree: 73%

---

# プッシュ通知の作成 {#create-push-notification}

![](assets/do-not-localize/badge.png)

[メッセージ](create-message.md)を作成したら、「**[!UICONTROL プッシュ通知]**」タブをクリックして、プッシュ通知の設定と内容を定義します。

![](assets/create-content-push.png)

専用のタブを使用して、**iOS**&#x200B;および&#x200B;**Android**&#x200B;オペレーティングシステムのプッシュ通知設定を定義します。

>[!NOTE]
>
>「**[!UICONTROL メッセージを構成]**」セクションは、「**[!UICONTROL iOS]**」タブと「**[!UICONTROL Android]**」タブの両方に共通です。 このセクションの変更は、両方のタブに適用されます。

## タイトルと本文

メッセージを作成するには、「**[!UICONTROL タイトル]**」フィールドと「**[!UICONTROL 本文]**」フィールドをクリックします。式エディターを使用して、内容とパーソナライズ機能のデータを定義します。[この節](personalization/personalize.md)の式エディターでのパーソナライゼーションについて説明します

中央のセクションを使用して、iOSおよびAndroidデバイスでのプッシュ通知の表示を視覚化します。

## クリック時の動作{#on-click-behavior}

受信者がプッシュ通知の本文をクリックした場合の動作を選択します。

![](assets/title-body-push.png)

* 「**[!UICONTROL アプリを開く]**」オプションを使用して、メッセージ&#x200B;**[!UICONTROL プリセット]**&#x200B;に関連付けられているアプリを開きます。
* 「**[!UICONTROL ディープリンク]**」オプションを使用して、受信者をアプリケーション内の特定のコンテンツにリダイレクトします。関連するフィールドにディープリンクを入力します。
* **[!UICONTROL Web URL]** オプションを使用して、受信者を外部の URL にリダイレクトします。関連するフィールドに URL を入力します。

## メディアの追加

iOSバージョンのプッシュ通知では、通知内に表示する画像、ビデオまたはGIFを追加できます。

Androidバージョンで追加できるのは、画像アイコンと、拡張通知用の画像のみです。

![](assets/push-config-add-media.png)

2つのオプションを使用できます。 次のことができます。

* 「**[!UICONTROL メディアを追加]**」ボタンをクリックして、**[!DNL Adobe Experience Manager Assets Essentials]**&#x200B;内のアセットを選択します。

   [このページ](assets-essentials.md)で&#x200B;**[!DNL Adobe Experience Manager Assets Essentials]**&#x200B;を使用する方法を説明します。

* または、「**[!UICONTROL メディアを追加]**」フィールドをクリックして、メディアのURLを入力します。 その場合は、パーソナライゼーションを追加できます。

メディアを追加すると、通知本文の右側にメディアが表示されます。


## ボタンの追加

プッシュコンテンツにボタンを追加することで、実用的な通知を作成できます。

デバイスの画面がロックされている場合、次のボタンは表示されません。通知の&#x200B;**タイトル**&#x200B;と&#x200B;**メッセージ**&#x200B;のみが表示されます。 デバイスのロックが解除されている場合、受信者に「 」ボタンが表示されます。

iOSバージョンでは、最大4つのボタンを追加できます。 Androidバージョンでは、最大3つのボタンを追加できます。

「**[!UICONTROL 追加ボタン]**」をクリックして設定を定義します。ラベルと関連するアクション。 可能なアクションは、[オンクリック動作](#on-click-behavior)の場合と同じです。


>[!NOTE]
>
>iOSの場合、**[!UICONTROL iOS category]**&#x200B;フィールドを使用して、アクションを通知カテゴリに関連付けます。


## サイレント通知の送信

サイレントプッシュ通知（バックグラウンド通知）は、アプリケーションに対して配信される非表示の命令です。 この変数は、例えば、新しいコンテンツが利用可能であることをアプリケーションに通知したり、バックグラウンドでダウンロードを開始したりする場合に使用します。

「**[!UICONTROL サイレント通知]**」オプションを選択して、アプリケーションにサイレントに通知します。この場合、通知はアプリケーションに直接転送されます。デバイスの画面にアラートは表示されません。

「**[!UICONTROL カスタムデータ]**」セクションを使用して、キーと値のペアを追加します。

## カスタムデータ

**[!UICONTROL カスタムデータ]**&#x200B;セクションでは、モバイルアプリケーションの設定に応じて、ペイロードにカスタム変数を追加できます。 Adobe Experience Platform と Adobe ローンチでのプッシュ通知の設定方法の詳細については、[このセクション](push-configuration.md)を参照してください。

## 詳細オプション

プッシュ通知用に&#x200B;**[!UICONTROL 詳細設定オプション]**&#x200B;を設定できます。 使用可能なパラメーターを次に示します。

| パラメーター | 説明 |
|---------|---------|
| **[!UICONTROL 折りたたみ可能]** (iOS/Android) | 折りたたみ可能なメッセージとは、新しいメッセージに置き換えられる可能性のあるメッセージです。 例えば、あるトピックに関する最新のニュースをユーザーに知らせるようなアプリケーションです。この場合、意味があるのは最新のメッセージだけです。 一方、折りたたみが不可能なメッセージは、クライアントアプリにとってすべてのメッセージが重要であり、配信する必要があるものです。 |
| **[!UICONTROL カスタムサウンド]** (iOS / Android) | 通知を受け取ったときにモバイル端末が再生するサウンド。 サウンドが、アプリにバンドルされている必要があります。 |
| **[!UICONTROL バッジ]** (iOS/Android) | バッジは、新しい未読情報の数をアプリケーションアイコンに直接表示するために使用します。<br/>バッジの値は、ユーザーがアプリケーションで新しいコンテンツを開いたり読んだりするとすぐに消えます。デバイスで通知を受け取ると、関連アプリのバッジ値を更新したり追加したりできます。<br/>たとえば、顧客の未読記事の数を保存している場合、パーソナライズ機能を利用して、各顧客にユニークな未読記事のバッジ値を送信できます。パーソナライズ機能の詳細については、[このセクション](personalization/personalize.md)を参照してください。 |
| **[!UICONTROL 通知グループ]**  （iOSのみ） | 通知グループをプッシュ通知に関連付けます。<br/>iOS 12 以降、通知グループを使用すると、メッセージスレッドと通知トピックをスレッド ID に統合できます。例えば、あるブランドでは、1 つのグループ ID でマーケティング通知を送信し、1 つか複数の別の ID でより多くの日常的な通知を送信することができます。<br/>例を挙げると、groupID：123 「セーターの新しい春のコレクションをチェックしてください」と groupID：456 「あなたのパッケージが配達されました」という通知グループを設定できます。この例では、すべての配達通知はグループ ID：456 の下にバンドルされます。 |
| **[!UICONTROL 通知チャネル]** （Androidのみ） | プッシュ通知に通知チャネルを関連付けます。<br/>Android 8.0（APIレベル26）以降では、表示するすべての通知をチャネルに割り当てる必要があります。詳しくは、[Android 開発者向けドキュメント](https://developer.android.com/guide/topics/ui/notifiers/notifications#ManageChannels)を参照してください。 |
| **[!UICONTROL コンテンツ利用可能フラグの追加]** （iOSのみ） | プッシュ通知を受け取るとアプリをすぐに起動し、コンテンツ使用可能フラグをプッシュペイロードで送信します。つまり、アプリはペイロードデータにアクセスできるようになります。<br/> この機能は、アプリがバックグラウンドで実行されていてユーザーからの操作（プッシュ通知のタップなど）がない場合でも動作しますが、アプリが実行されていない場合は動作しません。詳しくは、[Apple 開発者向けドキュメント](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CreatingtheNotificationPayload.html)を参照してください。 |
| **[!UICONTROL 可変コンテンツフラグを追加]** （iOSのみ） | プッシュペイロードに可変コンテンツフラグを送信し、iOS SDK で提供される通知サービスアプリケーション拡張機能によってプッシュ通知の内容を変更できるようにします。 詳しくは、[Apple 開発者向けドキュメント](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ModifyingNotifications.html)を参照してください。<br/>その後、モバイルアプリの拡張機能を利用して、[!DNL Journey Optimizer] から送信される着信プッシュ通知の内容や表示をさらに変更できます。このオプションを使用すると、データの復号化、通知の本文やタイトルテキストの変更、通知へのスレッド ID の追加などを行うことができます。 |
| **[!UICONTROL 通知の表示]** （Androidのみ） | プッシュ通知の表示を定義します。 <br/><b>プライベート</b>に設定すると、すべてのロック画面に通知が表示されますが、機密情報やプライベートな情報は保護されたロック画面に隠します。<br/><b>パブリック</b>に設定すると、すべてのロック画面に通知全体を表示します。<br/><b>シークレット</b>に設定すると、保護されたロック画面に通知を一切表示しません。<br/>詳しくは、[Android 開発者向けドキュメント](https://developer.android.com/reference/android/app/Notification)を参照してください。 |
| **[!UICONTROL 通知の優先度]** （Androidのみ） | プッシュ通知の重要度を「低」から「最高」まで定義します。 プッシュ通知が配信されたときに、どの程度「侵入的」な通知を行うかを決定します。 詳しくは、[Android 開発者向けドキュメント](https://developer.android.com/guide/topics/ui/notifiers/notifications#importance)を参照してください。 |
| **[!UICONTROL 配信の優先順位]** （Androidのみ） | プッシュ通知の優先度を高い値または通常の値に設定します。 メッセージの優先度の詳細については、[Google 開発者向けドキュメント](https://firebase.google.com/docs/cloud-messaging/concept-options#setting-the-priority-of-a-message)を参照してください。 |


**関連トピック**

<!--
* [Understand push notification flow](push-gs.md)
-->

* [プッシュチャネルの設定](push-configuration.md)
* [新しいメッセージを作成します。](create-message.md)
* [ジャーニーへのメッセージの追加](building-journeys/journeys-message.md)

