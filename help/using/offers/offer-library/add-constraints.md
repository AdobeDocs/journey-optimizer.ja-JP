---
title: オファーへの制約の追加
description: オファーが表示される条件を定義する方法を説明します
feature: Offers
topic: Integrations
role: User
level: Intermediate
exl-id: 7234a8e8-4ab0-4f17-a833-5e452fadac35
source-git-commit: f1ac47a0cb405eaadc5428e7e5479eaf776d7abe
workflow-type: tm+mt
source-wordcount: '1594'
ht-degree: 33%

---

# オファーへの制約の追加 {#add-constraints}

>[!CONTEXTUALHELP]
>id="od_offer_constraints"
>title="オファー制約について"
>abstract="制約を使用すると、オファーを他のオファーと比較して優先順位付けしユーザーに提示する方法を指定できます。"

>[!CONTEXTUALHELP]
>id="od_offer_priority"
>title="オファーの優先度について"
>abstract="このフィールドでは、オファーの優先度設定を指定できます。 優先度は、実施要件、日付、制限などのすべての制約を満たすオファーをランク付けするための数値です。"

>[!CONTEXTUALHELP]
>id="ajo_decisioning_priority"
>title="優先度"
>abstract="優先度は、ユーザーが複数のオファーに該当する場合に、他のオファーと比較して、オファーの優先度を定義するのに役立ちます。 オファーの優先度が高いほど、他のオファーと比較して優先順位が高くなります。"

制約を使用すると、オファーの表示条件を定義できます。

1. **[!UICONTROL オファー実施要件]**&#x200B;を設定します。[詳細情報](#eligibility)

   ![](../assets/offer-eligibility.png)

1. ユーザーが複数のオファーの対象となる場合は、他のオファーと比較したオファーの「**[!UICONTROL 優先度]**」を定義します。オファーの優先度が高いほど、他のオファーと比較して優先順位が高くなります。

   ![](../assets/offer-priority.png)

1. オファーの **[!UICONTROL キャッピング]**：オファーが表示される回数を意味します。 [詳細情報](#capping)

   ![](../assets/offer-capping.png)

1. クリック **[!UICONTROL 次へ]** ：定義したすべての拘束を確定します。

例えば、次の制約を設定した場合、

![](../assets/offer-constraints-example.png)

* このオファーは、「ゴールドロイヤルティ顧客」決定ルールに一致するユーザーに対してのみ考慮されます。
* オファーの優先度は「50」に設定されています。つまり、このオファーは優先度が 1～49 のオファーより先に、優先度が 51 以上のオファーより後に表示されます。
* オファーは、すべての配置をまたいで、ユーザーごとに 1 回だけ表示されます。

## 適格要件 {#eligibility}

>[!CONTEXTUALHELP]
>id="ajo_decisioning_eligibility"
>title="適格要件"
>abstract="オファーの実施要件を使用すると、セグメントや決定ルールを使用して定義した特定のプロファイルにオファーを制限できます。"

>[!CONTEXTUALHELP]
>id="od_offer_eligibility"
>title="オファー実施要件について"
>abstract="このセクションでは、決定ルールを使用して、オファーの対象となるユーザーを決定できます。"
>additional-url="https://video.tv.adobe.com/v/329373" text="デモビデオを見る"

この **[!UICONTROL オファーの適格要件]** 「 」セクションでは、セグメントまたは決定ルールを使用して定義した特定のプロファイルにオファーを制限できます。

>[!NOTE]
>
>の使用に関する詳細 **セグメント** 対比 **決定ルール** in [この節](#segments-vs-decision-rules).

* デフォルトでは、 **[!UICONTROL すべての訪問者]** オプションが選択されている場合は、すべてのプロファイルがオファーを提示する資格を持ちます。

   ![](../assets/offer-eligibility-default.png)

* また、1 つまたは複数のメンバーに対するオファーの表示を制限することもできます [Adobe Experience Platformセグメント](../../segment/about-segments.md).

   それには、「]**1 つまたは複数のセグメントに分類される訪問者**[!UICONTROL 」オプションを有効にしたあと、左ペインから 1 つまたは複数のセグメントを追加し、**[!UICONTROL かつ]**／**[!UICONTROL または]**&#x200B;論理演算子を使用してそれらを結合します。

   ![](../assets/offer-eligibility-segment.png)

* 特定の[決定ルール](../offer-library/creating-decision-rules.md)をオファーに関連付ける場合は、**[!UICONTROL 定義済みの決定ルール]**&#x200B;を選択し、目的のルールを左ペインから&#x200B;**[!UICONTROL 決定ルール]**&#x200B;領域にドラッグします。

   ![](../assets/offer_rule.png)

   >[!CAUTION]
   >
   >イベントベースのオファーは、現在 [!DNL Journey Optimizer] ではサポートされていません。 [イベント](https://experienceleague.adobe.com/docs/experience-platform/segmentation/ui/segment-builder.html?lang=ja#events){target=&quot;_blank&quot;}に基づいて決定ルールを作成した場合、それをオファーで活用することはできません。

### セグメントと決定ルールの使用上の違い {#segments-vs-decision-rules}

制約を適用するには、1 つまたは複数の **Adobe Experience Platform セグメント**&#x200B;のメンバーにオファーの選択を限定するか、**決定ルール**&#x200B;を使用します。どちらの手段もそれぞれ異なる使用法に対応します。

基本的に、セグメントの出力はプロファイルのリストです。一方、決定ルールは、決定プロセス中に単一プロファイルに対してオンデマンドで実行される関数です。 この 2 つの使用法の違いを以下に詳しく説明します。

* **セグメント**

   セグメントは、プロファイル属性とエクスペリエンスイベントに基づく特定のロジックに一致する Adobe Experience Platform プロファイルのグループです。 ただし、オファー管理ではセグメントの再計算は行われないので、オファーを提示する際にセグメントが最新でない可能性があります。

   セグメントの詳細については、[この節](../../segment/about-segments.md)を参照してください。

* **決定ルール**

   一方、決定ルールは、Adobe Experience Platform で使用可能なデータに基づいており、オファーを誰に表示できるかを決定します。 特定のプレースメントのオファーまたは決定でルールが選択されると、決定が行われるたびにそのルールが実行されるので、各プロファイルが最新かつ最適なオファーを確実に取得できます。

   決定ルールについて詳しくは、[この節](creating-decision-rules.md)を参照してください。

## 頻度キャップ {#capping}

>[!CONTEXTUALHELP]
>id="od_offer_globalcap"
>title="オファー制限について"
>abstract="このフィールドでは、オファーの提示回数を指定できます。"

>[!CONTEXTUALHELP]
>id="ajo_decisioning_capping"
>title="キャッピング"
>abstract="キャッピングは、オファーを提示できる最大回数を定義する制約として使用されます。"

キャッピングは、オファーを提示できる最大回数を定義する制約として使用されます。

ユーザーが特定のオファーを受け取る回数を制限すると、顧客に過度の勧誘をしないようにし、各タッチポイントを最適なオファーで最適化できます。

キャッピングを設定するには、次の手順に従います。

1. オファーを提示できる回数を定義します。

   ![](../assets/offer-capping-times.png)

   >[!NOTE]
   >
   >数値は 0 より大きい整数にする必要があります。

1. すべてのユーザーに対してキャッピングを適用するか、1 つの特定のプロファイルに対してキャッピングを適用するかを指定します。

   ![](../assets/offer-capping-total.png)

   * 選択 **[!UICONTROL 合計]** を使用して、組み合わせターゲットオーディエンス（つまり、すべてのユーザーに対して）でオファーを提案できる回数を定義できます。

      例えば、「TV Doobuster 契約」を持つ電子機器の小売業者の場合、オファーが返される回数は、すべてのプロファイルで 200 回に制限されます。

   * 選択 **[!UICONTROL プロファイルごと]** を使用して、1 つのオファーを同じユーザーに対して提案できる回数を定義できます。

      例えば、「プラチナクレジットカード」のオファーを持つ銀行の場合、このオファーを 1 つのプロファイルにつき 5 回以上表示したくないとします。 実際、ユーザーがオファーを 5 回見て、それに対して何らかのアクションをおこなっていない場合、次に最適なオファーに対して行動する機会が高いと考えられます。

1. 複数の [表示域](#representations) オファーに対して、キャッピングを適用するかどうかを指定します **[!UICONTROL すべての配置]** または **[!UICONTROL 各配置]**.

   ![](../assets/offer-capping-placement.png)

   * **[!UICONTROL すべての配置]**:上限数は、オファーに関連付けられた配置全体のすべての決定の合計となります。

      例えば、オファーに **電子メール** 配置と **Web** 配置を選択し、次の場所にキャッピングを設定します。 **すべての配置のプロファイルあたり 2**&#x200B;の場合、各プロファイルは、配置ミックスに関係なく、合計で最大 2 回オファーを受け取ることができます。

   * **[!UICONTROL 各配置]**:キャッピングカウントでは、各プレースメントに対して個別に判定回数が適用されます。

      例えば、オファーに **電子メール** 配置と **Web** 配置を選択し、次の場所にキャッピングを設定します。 **各配置に対するプロファイルあたり 2**&#x200B;の場合、各プロファイルは、電子メール配置に対して最大 2 回、Web 配置に対してさらに 2 回、オファーを受け取ることができます。

1. 保存され承認されると、定義した条件に従って、このフィールドに指定した回数のオファーが提示された場合、配信は停止されます。

E メールの準備時に、オファーが提案された回数が計算されます。例えば、複数のオファーを含んだメールを準備する場合、そのメールが送信されるかどうかに関係なく、それらのオファーの数はオファーの提示回数に加算されます。

<!--If an email delivery is deleted or if the preparation is done again before being sent, the capping value for the offer is automatically updated.-->

>[!NOTE]
>
>キャッピングカウンターは、オファーの有効期限が切れたとき、またはオファーの開始日から 2 年後のいずれか早い方にリセットされます。 オファーの日付を定義する方法については、 [この節](creating-personalized-offers.md#create-offer).

### 上限に対する日付変更の影響 {#capping-change-date}

>[!CONTEXTUALHELP]
>id="ajo_decisioning_offer_change_date"
>title="日付を変更すると、上限に影響を与える可能性があります"
>abstract="このオファーにキャッピングが適用されている場合、開始日または終了日を変更すると影響を受ける可能性があります。"

オファーの日付を変更する場合は、次の条件を満たすとキャッピングに影響を与える可能性があるので、慎重におこなう必要があります。

* オファーは [承認済み](#review).
* [キャッピング](#capping) は既にオファーに適用されています。
* キャッピングは、プロファイルごとに定義されます。

>[!NOTE]
>
>オファーの日付を定義する方法については、 [この節](creating-personalized-offers.md#create-offer).

プロファイルごとの頻度キャップでは、各プロファイルのキャッピング回数が保存されます。 承認されたオファーの開始日と終了日を変更すると、以下に説明する様々なシナリオに従って、一部のプロファイルの上限数が影響を受ける可能性があります。

![](../assets/offer-capping-change-date.png)

以下に、 **オファー開始日の変更**:

| シナリオ：<br>次の場合： | 結果：<br>次に… | キャッピング数に対する影響の可能性 |
|--- |--- |--- |
| オファーの開始日は、元のオファーの開始日が開始される前に更新されます。 | 制限数は新しい開始日に開始されます。 | × |
| 新しい開始日が現在の終了日より前に設定されている場合、 | キャッピングは新しい開始日から続き、各プロファイルの以前のキャッピング数が繰り越されます。 | × |
| 新しい開始日は、現在の終了日より後です。 | 現在の上限は期限切れになり、新しい開始日にすべてのプロファイルに対して新しい上限数が 0 から再び開始されます。 | ○ |

以下に、 **オファー終了日の延長**:

| シナリオ：<br>次の場合： | 結果：<br>次に… | キャッピング数に対する影響の可能性 |
|--- |--- |--- |
| ...元のオファーの終了日より前に決定リクエストが発生し、 | キャッピング数が更新され、各プロファイルの以前のキャッピング数が繰り越されます。 | × |
| ...元の終了日より前に判定リクエストが発生していない。 | 制限回数は、各プロファイルの元の終了日にリセットされます。 その後、元の終了日の後に発生する新しい判定リクエストについて、新しい上限カウントが 0 から再び開始されます。 | ○ |

**例**

元の開始日がに設定されたオファーがあるとします。 **1 月 1 日**、有効期限 **1 月 31 日**.

1. プロファイル X、Y、Z がオファーに表示されます。
1. オン **1 月 10 日**&#x200B;に設定されていない場合、オファーの終了日は **2 月 15 日**.
1. **1 月 11 日～1 月 31 日**&#x200B;に設定されている場合、プロファイル Z のみがオファーに表示されます。

   * 判定リクエストが元の終了日より前に発生したため **プロファイル Z の場合**&#x200B;に設定する場合、オファーの終了日を **2 月 15 日**.
   * ただし、 **プロファイル X と Y**&#x200B;に設定すると、カウンターは期限切れになり、上限数は **1 月 31 日**.

![](../assets/offer-capping-change-date-ex.png)
