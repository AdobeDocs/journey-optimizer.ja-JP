---
title: 決定の作成
description: 決定の作成方法を説明します
feature: Offers
topic: Integrations
role: User
level: Intermediate
exl-id: 7a217c97-57e1-4f04-a92c-37632f8dfe91
source-git-commit: 146dda9b180a4767b7041b50382f9a0eac0a0058
workflow-type: tm+mt
source-wordcount: '2164'
ht-degree: 66%

---

# 決定の作成 {#create-offer-activities}

決定とは、配信ターゲットに応じて提供すべき最適なオファーを選択するために、オファー決定エンジンを利用するオファーのコンテナです。

➡️ [オファーアクティビティを作成する方法については、このビデオをご覧ください](#video)

**[!UICONTROL オファー]**&#x200B;メニューの「**[!UICONTROL 決定]**」タブに決定が一覧表示されます。フィルターは、ステータスや開始日、終了日に応じて決定を取得するのに役立ちます。

![](../assets/activities-list.png)

決定を作成する前に、以下のコンポーネントがオファーライブラリに作成されていることを確認してください。

* [プレースメント](../offer-library/creating-placements.md)
* [コレクション](../offer-library/creating-collections.md)
* [パーソナライズされたオファー](../offer-library/creating-personalized-offers.md)
* [フォールバックオファー](../offer-library/creating-fallback-offers.md)

## 決定の作成 {#create-activity}

1. 決定リストにアクセスし、「**[!UICONTROL 決定を作成]**」をクリックします。

1. 決定の名前を指定します。

1. 必要に応じて開始日時と終了日時を指定し、「**[!UICONTROL 次へ]**」をクリックします。

   ![](../assets/activities-name.png)

1. 決定にカスタムデータ使用ラベルまたはコアデータ使用ラベルを割り当てるには、「**[!UICONTROL アクセスを管理]**」を選択します。[オブジェクトレベルのアクセス制御（OLAC）について詳しくはこちらから](../../administration/object-based-access.md)

## 決定範囲の定義 {#add-decision-scopes}

1. ドロップダウンリストからプレースメントを選択します。これは、決定の最初の決定範囲に追加されます。

   ![](../assets/activities-placement.png)

1. 「 **[!UICONTROL 追加]**」をクリックして、このプレースメントの評価条件を選択します。

   ![](../assets/activities-evaluation-criteria.png)

   各条件は、実施要件制約に関連付けられたオファーコレクションと、プレースメントに表示されるオファーを決定するためのランキング方法で構成されます。

   >[!NOTE]
   >
   >少なくとも 1 つの評価条件が必要です。

1. 考慮するオファーを含んだコレクションを選択し、「**[!UICONTROL 追加]**」をクリックします。

   ![](../assets/activities-collection.png)

   >[!NOTE]
   >
   >「**[!UICONTROL オファーコレクションを開く]**」リンクをクリックすると、コレクションのリストが新しいタブに表示されます。ここで、コレクションとそれに含まれるオファーを参照できます。

   選択したコレクションが条件に追加されます。

   ![](../assets/activities-collection-added.png)

1. 「**[!UICONTROL 実施要件]**」フィールドを使用して、このプレースメントのオファーの選択を制限します。

   この制約は、**決定ルール**&#x200B;または 1 つ以上の **Adobe Experience Platform セグメント**&#x200B;を使用して適用できます。この両方について詳しくは、[この節](../offer-library/add-constraints.md#segments-vs-decision-rules)を参照してください。

   * オファーの選択を Experience Platform セグメントのメンバーに限定するには、「**[!UICONTROL セグメント]**」を選択したあと、「**[!UICONTROL セグメントを追加]**」をクリックします。

     ![](../assets/activity_constraint_segment.png)

     左側のパネルから 1 つまたは複数のセグメントを追加し、 **[!UICONTROL かつ]**／**[!UICONTROL または]**&#x200B;論理演算子を使用してそれらのセグメントを組み合わせます。

     ![](../assets/activity_constraint_segment2.png)

     セグメントの操作方法については、[この節](../../segment/about-segments.md)を参照してください。

   * 決定ルールに選択制約を追加する場合は、「**[!UICONTROL 決定ルール]**」オプションを使用し、任意のルールを選択します。

     ![](../assets/activity_constraint_rule.png)

     決定ルールの作成方法については、 [この節](../offer-library/creating-decision-rules.md)を参照してください。

1. セグメントまたは決定ルールを選択すると、推定される認定プロファイルに関する情報を表示できます。 「**[!UICONTROL 更新]**」をクリックしてデータを更新します。

   >[!NOTE]
   >
   >プロファイルの予測は、ルールパラメーターにコンテキストデータなど、プロファイルに含まれていないデータが含まれている場合は使用できません。例えば、現在の気温が 80 ℃以上であることを条件とする実施要件ルールがあります。

   ![](../assets/activity_constraint-estimate.png)

1. プロファイルごとに最適なオファーを選択するためのランキング方法を定義します。[詳細情報](../offer-activities/configure-offer-selection.md)

   ![](../assets/activity_ranking-method.png)

   * このプレースメントに対して、実施要件を満たすオファーが複数ある場合、デフォルトでは、**[!UICONTROL オファーの優先度]**&#x200B;メソッドがオファーで定義された値を使用します。優先度スコアが最も高いオファーがユーザーに配信されます。

   * 特定の計算済みスコアを使用して配信する実施要件を満たすオファーを選択する場合は、「**[!UICONTROL 数式]**」または「**[!UICONTROL AI モデル]**」を選択します。[詳細情報](../offer-activities/configure-offer-selection.md)

1. 「**[!UICONTROL 追加]**」をクリックすると、同じプレースメントに対する条件をさらに定義できます。

   ![](../assets/activity_add-collection.png)

1. 複数の条件を追加した場合、それらは特定の順序で評価されます。シーケンスに最初に追加されたコレクションが最初に評価され、以下同様に評価されます。[詳細情報](#evaluation-criteria-order)

   デフォルトの順序を変更するには、コレクションをドラッグ＆ドロップして、任意に並べ替えることができます。

   ![](../assets/activity_reorder-collections.png)

1. また、複数の条件を同時に評価することもできます。それには、コレクションを別のコレクションの上にドラッグ＆ドロップします。

   ![](../assets/activity_move-collection.png)

   これで同じランクになるので、これらは同時に評価されます。[詳細情報](#evaluation-criteria-order)

   ![](../assets/activity_same-rank-collections.png)

1. この決定の一部としてオファーに別のプレースメントを追加するには、「**[!UICONTROL 新しいスコープ]**」ボタンを使用します。決定範囲ごとに、上記の手順を繰り返します。

   ![](../assets/activity_new-scope.png)

   >[!NOTE]
   >
   >複数の決定範囲を追加する場合、評価条件の順序に影響が出ます。 [詳細情報](#multiple-scopes)

### 評価条件の順序 {#evaluation-criteria-order}

上記のように、評価条件は、コレクション、実施要件制約およびランキングメソッドで構成されます。評価条件を評価する順序を設定できますが、複数の評価条件を組み合わせて、個別にではなくまとめて評価することもできます。

#### 1 つのスコープ {#one-scope}


1 つの決定範囲内で、複数の条件とそのグループが、条件の優先度と実施要件を満たすオファーのランクを決定します。 最初の条件の優先度が最も高く、同じ「グループ」内で結合された条件の優先度が同じになります。

例えば、2 つのコレクションがあり、1 つは評価条件 A に、もう 1 つは評価条件 B にあるとします。リクエストは、2 つのオファーを送り返すことです。評価条件 A の 2 つの実施要件を満たすオファーがあり、評価条件 B の 3 つの実施要件を満たすオファーがあるとします。

* 2 つの評価条件が&#x200B;**組み合わされていない**&#x200B;か、順序が同じでない場合（1 と 2）、評価条件の上位 2 つの実施要件を満たすオファーが最初の行に返されます。最初の評価条件に実施要件を満たすオファーが 2 つない場合、決定エンジンは次の評価条件に順番に進み、まだ必要なオファーを見つけ、必要に応じて最終的にフォールバックを返します。

  ![](../assets/activity_consecutive-rank-collections.png)

* 2 つのコレクションが&#x200B;**同時に評価**&#x200B;される場合、評価条件 A から 2 つの実施要件を満たすオファーがあり、評価条件 B から 3 つの実施要件を満たすオファーがあるので、5 つのオファーはすべて、それぞれのランキングメソッドによって決定された値に基づいてまとめられます。2 つのオファーがリクエストされているので、これら 5 つのオファーのうち上位 2 つの実施要件を満たすオファーが返されます。

  ![](../assets/activity_same-rank-collections.png)

+++ **複数の条件の例**

次に、1 つのスコープに対して複数の条件を異なるグループに分割した例を見てみましょう。

3 つの条件を定義しました。 条件 1 と条件 2 がグループ 1 で組み合わされ、条件 3 が独立している（グループ 2）。

各条件の適格なオファーとその優先度（ランキング関数の評価で使用）は、次のとおりです。

* グループ 1:
   * 条件 1 - （オファー 1、オファー 2、オファー 3） — 優先度 1
   * 条件 2 - （オファー 3、オファー 4、オファー 5） — 優先度 1

* グループ 2:
   * 条件 3 - （オファー 5、オファー 6） — 優先度 0

優先順位が最も高い条件のオファーが最初に評価され、ランク付けされたオファーリストに追加されます。

**反復 1:**

条件 1 および条件 2 のオファーは、一緒に評価されます（オファー 1、オファー 2、オファー 3、オファー 4、オファー 5）。 結果が次のようになったとします。

オファー 1 - 10 オファー 2 - 20 オファー 3 - 30 条件 1、45 条件 2。 両者の中で最も高いものが考慮されるので、45 が考慮されます。
オファー 4 - 40 オファー 5 - 50

ランク付けされたオファーは、次のようになりました。Offer 5, Offer 3, Offer 4, Offer 2, Offer 1.

**反復 2:**

条件 3 のオファーが評価されます（オファー 5、オファー 6）。 結果が次のようになったとします。

* オファー 5 — 上記の結果に既に存在するので、評価されません。
* オファー 6 - 60

ランク付けされたオファーは、次のようになりました。オファー 5 、オファー 3、オファー 4、オファー 2、オファー 1、オファー 6。

+++

#### 複数のスコープを使用 {#multiple-scopes}

**重複がオフの場合**

決定に複数の決定範囲を追加し、複数の配置間で重複が許可されない場合、リクエストの決定範囲の順序で、適格なオファーが順番に選択されます。

>[!NOTE]
>
>この **[!UICONTROL 配置間での重複を許可]** パラメーターは配置レベルで設定されます。 判定リクエストの任意の配置に対して複製が false に設定されている場合、リクエスト内のすべての配置は false 設定を継承します。 [複製パラメーターの詳細を説明します](../offer-library/creating-placements.md)

次の例で、2 つの決定範囲を追加した例を見てみましょう。

* スコープ 1:実施要件を満たすオファーは 4 つ（オファー 1、オファー 2、オファー 3、オファー 4）あり、リクエストでは 2 つのオファーを返送します。
* スコープ 2:実施要件を満たすオファーは 4 つ（オファー 1、オファー 2、オファー 3、オファー 4）あり、リクエストでは 2 つのオファーを返送します。

+++ **例 1**

選択肢は次のとおりです。

1. スコープ 1 の適格な上位 2 つのオファーが返されます（オファー 1、オファー 2）。
1. スコープ 2 の残りの上位 2 つの適格なオファー（オファー 3、オファー 4）が返されます。

+++

+++ **例 2**

この例では、オファー 1 が頻度キャップの上限に達しました。 [頻度キャップの詳細を表示](../offer-library/add-constraints.md#capping)

選択肢は次のとおりです。

1. スコープ 1 の残りの上位 2 つの適格なオファー（オファー 2、オファー 3）が返されます。
1. 残りの有効なオファーは、スコープ 2 から返されます（オファー 4）。

+++

+++ **例 3**

この例では、オファー 1 とオファー 3 が頻度キャップの上限に達しています。 [頻度キャップの詳細を表示](../offer-library/add-constraints.md#capping)

選択肢は次のとおりです。

1. スコープ 1 の残りの上位 2 つの適格なオファー（オファー 2、オファー 4）が返されます。
1. スコープ 2 に適格なオファーが残っていないので、 [フォールバックオファー](#add-fallback) が返されます。

+++

**複製がオンの場合**

すべての配置で複製が許可されている場合、異なる配置間で同じオファーを複数回提案できます。 有効にすると、システムは複数のプレースメントに対して同じオファーを考慮します。[複製パラメーターの詳細を説明します](../offer-library/creating-placements.md)

上記と同じ例で、次のような 2 つの決定範囲を追加しました。

* スコープ 1:実施要件を満たすオファーは 4 つ（オファー 1、オファー 2、オファー 3、オファー 4）あり、リクエストでは 2 つのオファーを返送します。
* スコープ 2:実施要件を満たすオファーは 4 つ（オファー 1、オファー 2、オファー 3、オファー 4）あり、リクエストでは 2 つのオファーを返送します。

+++ **例 1**

選択肢は次のとおりです。

1. スコープ 1 の適格な上位 2 つのオファーが返されます（オファー 1、オファー 2）。
1. スコープ 2 の同じ上位 2 つの適格なオファーが返されます（オファー 1、オファー 2）。

+++

+++ **例 2**

この例では、オファー 1 が頻度キャップの上限に達しました。 [頻度キャップの詳細を表示](../offer-library/add-constraints.md#capping)

選択肢は次のとおりです。

1. スコープ 1 の残りの上位 2 つの適格なオファー（オファー 2、オファー 3）が返されます。

1. 残りの 2 つの適格なオファーのうち、スコープ 2 の上位 2 つが返されます（オファー 2、オファー 3）。

+++

+++ **例 3**

この例では、オファー 1 とオファー 3 が頻度キャップの上限に達しています。 [頻度キャップの詳細を表示](../offer-library/add-constraints.md#capping)

選択肢は次のとおりです。

1. スコープ 1 の残りの上位 2 つの適格なオファー（オファー 2、オファー 4）が返されます。

1. 残りの 2 つの適格なオファーのうち、スコープ 2 の上位 2 つが返されます（オファー 2、オファー 4）。

+++

## フォールバックオファーの追加 {#add-fallback}

決定範囲を定義したら、オファーの実施要件ルールと制約に一致しない顧客への最後の手段として提示されるフォールバックオファーを定義します。

それには、決定で定義されたプレースメントに使用可能なフォールバックオファーのリストから選択し、「**[!UICONTROL 次へ]**」をクリックします。

![](../assets/add-fallback-offer.png)

>[!NOTE]
>
>「**[!UICONTROL オファーライブラリを開く]**」リンクをクリックして、オファーのリストを新しいタブに表示できます。

## 決定のレビューと保存 {#review}

すべてが正しく設定されている場合は、決定プロパティの概要が表示されます。

1. 顧客にオファーを提示するために、決定を使用する準備ができていることを確認します。すべての決定範囲と、その中に含まれるフォールバックオファーが表示されます。

   ![](../assets/review-decision.png)

1. 各プレースメントを展開または折りたたむことができます。プレースメントごとに、使用可能なオファー、実施要件およびランキングの詳細をプレビューできます。また、推定認定プロファイルに関する情報を表示することもできます。「**[!UICONTROL 更新]**」をクリックしてデータを更新します。

   ![](../assets/review-decision-details.png)

1. 「**[!UICONTROL 完了]**」をクリックします。
1. 「**[!UICONTROL 保存して有効化]**」を選択します。

   ![](../assets/save-activities.png)

   また、決定をドラフトとして保存し、後で編集して有効にすることもできます。

決定は、前のステップで有効にしたかどうかに応じて、**[!UICONTROL ライブ]**&#x200B;または&#x200B;**[!UICONTROL ドラフト]**&#x200B;のステータスでリストに表示されます。

これで、顧客にオファーを提供するために決定を使用する準備が整いました。

## 決定リスト {#decision-list}

決定リストから決定を選択して、プロパティを表示できます。ここから編集したり、ステータス（**ドラフト**、**ライブ**、**完了**、**アーカイブ済み**）を変更したり、決定を複製したり、削除したりできます。

![](../assets/decision_created.png)

「**[!UICONTROL 編集]**」ボタンを選択して、決定編集モードに戻ります。このモードで、決定の[詳細](#create-activity)、[決定範囲](#add-decision-scopes)および[フォールバックオファー](#add-fallback)を変更できます。

>[!IMPORTANT]
>
>ジャーニーのメッセージで使用されるオファーの決定に変更が加えられた場合は、ジャーニーを非公開にして、再公開する必要があります。  これにより、変更がジャーニーのメッセージに組み込まれ、メッセージが最新の更新と一致するようになります。

ライブ決定を選択し、「**[!UICONTROL 無効化]**」をクリックして、決定のステータスを&#x200B;**[!UICONTROL ドラフト]**&#x200B;に戻します。

ステータスを再度「**[!UICONTROL ライブ]**」に設定するには、表示されている「**[!UICONTROL 有効化]**」ボタンを選択します。

![](../assets/decision_activate.png)

「**[!UICONTROL その他のアクション]**」ボタンをクリックすると、以下に示すアクションが有効になります。

![](../assets/decision_more-actions.png)

* **[!UICONTROL 完了]**：決定のステータスを&#x200B;**[!UICONTROL 完了]**&#x200B;に設定します。これは、決定を呼び出すことができなくなったことを意味します。このアクションは、有効化された決定に対してのみ使用できます。決定は引き続きリストから利用できますが、ステータスを&#x200B;**[!UICONTROL ドラフト]**&#x200B;または&#x200B;**[!UICONTROL 承認済み]**&#x200B;に戻すことはできません。複製、削除またはアーカイブのみが可能です。

* **[!UICONTROL 複製]**：同じプロパティ、決定範囲およびフォールバックオファーを持つ決定を作成します。デフォルトでは、新しい決定のステータスは&#x200B;**[!UICONTROL ドラフト]**&#x200B;になります。

* **[!UICONTROL 削除]**：決定をリストから削除します。

  >[!CAUTION]
  >
  >決定とその内容にアクセスできなくなります。このアクションは取り消しできません。
  >
  >決定が別のオブジェクトで使用されている場合は、削除できません。

* **[!UICONTROL アーカイブ]**：決定のステータスを&#x200B;**[!UICONTROL アーカイブ済み]**&#x200B;に設定します。決定は引き続きリストから使用できますが、ステータスを&#x200B;**[!UICONTROL ドラフト]**&#x200B;または&#x200B;**[!UICONTROL 承認済み]**&#x200B;に戻すことはできません。複製または削除のみ可能です。

該当するチェックボックスを選択することで、複数の決定のステータスを同時に削除または変更することもできます。

![](../assets/decision_multiple-selection.png)

異なるステータスを持つ複数の決定のステータスを変更する場合は、関係のあるステータスのみ変更されます。

![](../assets/decision_change-status.png)

決定が作成されたら、その名前をリストからクリックできます。

![](../assets/decision_click-name.png)

これにより、その決定の詳細情報にアクセスできます。「**[!UICONTROL 変更ログ]**」タブを選択して、決定に加えられた[すべての変更を監視](../get-started/user-interface.md#changes-log)します。

![](../assets/decision_information.png)

## チュートリアルビデオ{#video}

意思決定管理でオファーアクティビティを作成する方法を説明します。

>[!VIDEO](https://video.tv.adobe.com/v/329606?quality=12)


