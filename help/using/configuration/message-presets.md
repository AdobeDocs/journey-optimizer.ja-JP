---
title: メッセージプリセットの設定
description: メッセージプリセットを設定および監視する方法について学ぶ
feature: Application Settings
topic: Administration
role: Admin
level: Intermediate
exl-id: 9038528f-3da0-4e0e-9b82-b72c67b42391
source-git-commit: a485c58366f0690fb2515139658224d59468a24f
workflow-type: tm+mt
source-wordcount: '1547'
ht-degree: 98%

---

# メッセージプリセットの設定 {#message-presets-creation}

[!DNL Journey Optimizer] では、メッセージプリセットを設定して、メールとプッシュ通知メッセージに必要な技術的パラメーター（メールのタイプ、送信者のメールと名前、モバイルアプリなど）を定義しておくことができます。

>[!CAUTION]
>
> * メッセージプリセットを作成、編集、削除するには、[メッセージプリセットの管理](../administration/high-low-permissions.md#manage-message-presets)を備えている必要があります。
>
> * メッセージプリセットを作成する前に、[電子メール設定](#configure-email-settings)手順と[プッシュ設定](../configuration/push-configuration.md)手順を実行する必要があります。


メッセージプリセットを設定したら、メッセージを作成する際に&#x200B;**[!UICONTROL プリセット]**&#x200B;リストからメッセージプリセットを選択できるようになります。

➡️ [メールプリセットの作成および使用方法については、このビデオを参照](#video-presets)

## メッセージプリセットの作成 {#create-message-preset}

>[!CONTEXTUALHELP]
>id="ajo_admin_message_presets"
>title="メッセージプリセットの詳細と設定"
>abstract="メッセージプリセットを設定することで、適用するチャネルを選択し、電子メールのタイプ、使用するサブドメイン、送信者名、モバイルアプリなど、メッセージに必要なあらゆる技術的パラメーターを定義できます。"

メッセージプリセットを作成するには、次の手順に従います。

1. **[!UICONTROL チャネル]**／**[!UICONTROL ブランディング]**／**[!UICONTROL メッセージプリセット]**&#x200B;メニューにアクセスし、「**[!UICONTROL メッセージプリセットを作成]**」をクリックします。

   ![](assets/preset-create.png)

1. プリセットの名前と説明（オプション）を入力し、設定するチャネルを選択します。

   ![](assets/preset-general.png)

   >[!NOTE]
   >
   > 名前は、文字（A ～ Z）で始める必要があります。使用できるのは英数字のみです。アンダースコア（`_`）、ドット（`.`）、ハイフン（`-`）も使用できます。

1. **メール**&#x200B;の設定を行います。[詳細情報](#configure-email-settings)

1. **プッシュ通知**&#x200B;の設定を行います。[詳細情報](#configure-push-settings)

   <!--Configure SMS settings. [Learn more](#configure-sms-settings) -->

1. すべてのパラメーターを設定したら、「**[!UICONTROL 送信]**」をクリックして確定します。なお、メッセージプリセットをドラフトとして保存し、後で設定を再開することもできます。

   ![](assets/preset-submit.png)

   >[!NOTE]
   >
   >選択した IP プールが[編集中](ip-pools.md#edit-ip-pool)（**[!UICONTROL 処理中]**&#x200B;ステータス）で、選択したサブドメインに関連付けられていない場合は、プリセットの作成を続行できません。[詳細情報](#subdomains-and-ip-pools)
   >
   >プリセットをドラフトとして保存し、IP プールが&#x200B;**[!UICONTROL 成功]**&#x200B;ステータスになるまで待機して、プリセットの作成を再開します。

1. メッセージプリセットが作成されると、リストに「**[!UICONTROL 処理中]**」のステータスで表示されます。

   この段階では、メッセージプリセットが適切に設定されていることを確かめるために、いくつかのチェックが実行されています。処理時間はおよそ **48～72 時間**&#x200B;で、最長で **7～10 営業日**&#x200B;かかることがあります。

   このチェックには、アドビチームが行う設定および技術テストが含まれています。

   * SPF 検証
   * DKIM 検証
   * MX レコードの検証
   * 拒否リストへの IP 登録の検証
   * Helo ホストの検証
   * IP プールの検証
   * A/PTR レコード、t/m/res サブドメインの検証

   >[!NOTE]
   >
   >チェックが成功しなかった場合、考えられる失敗理由について詳しくは[この節](#monitor-message-presets)を参照してください。

1. チェックが正常に完了すると、メッセージプリセットのステータスが「**[!UICONTROL アクティブ]**」になります。メッセージの配信に使用する準備が整いました。

   ![](assets/preset-active.png)

## メール設定 {#configure-email-settings}

メール設定は、メッセージプリセット設定の専用のセクションで定義します。

![](assets/preset-email.png)

設定を指定します ( [この節](email-settings.md).

## プッシュ設定 {#configure-push-settings}

プッシュ設定は、メッセージプリセット設定の専用のセクションで定義します。

メッセージプリセットに関連付けられたプッシュ設定を定義するには、次の手順に従います。

1. 少なくとも 1 つのプラットフォーム（**iOS**、**Android** もしくは両方）を選択します。

1. 各プラットフォームで使用するモバイルアプリケーションを選択します。

![](assets/preset-push.png)

プッシュ通知を送信する環境の設定方法については、[この節](../configuration/push-gs.md)を参照してください。

<!--
## Configure SMS settings {#configure-sms-settings}

1. Select the **[!UICONTROL SMS Type]** that will be sent with the preset: **[!UICONTROL Transactional]** or **[!UICONTROL Marketing]**.

    ![](assets/preset-sms.png)
    
1. Select the **[!UICONTROL SMS configuration]** to associate with the preset.
        
    For more on how to configure your environment to send SMS messages, refer to [this section](sms-configuration.md).

1. Enter the **[!UICONTROL Sender number]** ​you want to use for your communications.
-->

## メッセージプリセットの監視 {#monitor-message-presets}

すべてのメッセージプリセットは、**[!UICONTROL チャネル]**／**[!UICONTROL メッセージプリセット]**&#x200B;メニューに表示されます。フリスト（チャネルタイプ、ユーザー、ステータス）を参照するのに役立つフィルターを使用できます。

![](assets/preset-filters.png)

作成されると、メッセージプリセットは次のステータスになります。

* **[!UICONTROL ドラフト]**：メッセージプリセットは下書きとして保存されており、まだ送信されていません。設定を再開するには、これを開きます。
* **[!UICONTROL 処理中]**：メッセージプリセットが送信され、いくつかの検証手順を実行中です。
* **[!UICONTROL アクティブ]**：メッセージプリセットは検証済みであり、選択してメッセージを作成できます。
* **[!UICONTROL 失敗]**：メッセージプリセットの検証中に、1 つ以上のチェックが失敗しました。
* **[!UICONTROL 非アクティブ]**：メッセージプリセットが非アクティブになっています。新しいメッセージの作成には使用できません。

メッセージプリセットの作成に失敗した場合、考えられる各エラー理由の詳細は次のとおりです。

これらのエラーのいずれかが発生した場合は、[アドビカスタマーケア](https://helpx.adobe.com/jp/enterprise/admin-guide.html/enterprise/using/support-for-experience-cloud.ug.html){target=&quot;_blank&quot;} にご連絡ください。

* **SPF 検証に失敗しました**：SPF（Sender Policy Framework）はメール認証プロトコルで、特定のサブドメインからメールを送信できる承認済み IP を指定できます。SPF 検証エラーは、SPF レコードの IP アドレスが、メールボックスプロバイダーへのメール送信に使用される IP アドレスと一致しないことを意味します。

* **DKIM 検証に失敗しました**：DKIM（DomainKeys Identified Mail）を使用すると、受信したメッセージが関連ドメインの正規の送信者によって送信されたこと、および元のメッセージの内容が途中で改変されていないことを受信サーバーが検証できます。DKIM 検証の失敗は、メッセージコンテンツの信頼性とメッセージコンテンツの送信ドメインとの関連付けを受信メールサーバーが検証できないことを意味します。

* **MX レコードの検証に失敗しました**：MX（Mail eXchange）レコードの検証の失敗は、特定のサブドメインに代わって受信メールを受け取るべきメールサーバーが正しく設定されていないことを意味します。

* **配信品質の設定に失敗しました**：配信品質の設定の失敗は、次のいずれかの理由で起こる可能性があります。
   * 割り当てられた IP がブロックリストに登録されている
   * `helo` 名が無効
   * 対応するプリセットの IP プールで指定された IP 以外の IP からメールが送信される
   * Gmail や Yahoo などの主要な ISP の受信ボックスにメールを配信できない

## メッセージプリセットの編集 {#edit-message-preset}

メッセージプリセットを編集するには、次の手順に従います。

>[!NOTE]
>
>**[!UICONTROL プッシュ通知設定]**&#x200B;は編集できません。メッセージプリセットがプッシュ通知チャネル用にのみ設定されている場合は、編集できません。

1. リストでメッセージプリセット名をクリックして開きます。

   ![](assets/preset-name.png)

1. そのプロパティを必要に応じて編集します。

   >[!NOTE]
   >
   >メッセージプリセットのステータスが&#x200B;**[!UICONTROL アクティブ]**&#x200B;の場合、「**[!UICONTROL 名前]**」、「**[!UICONTROL チャネルを選択]**」および「**[!UICONTROL サブドメイン]**」フィールドは灰色表示になっており、編集できません。

1. 「 **[!UICONTROL 送信]**」をクリックして、変更を確定します。

   ![](assets/preset-confirm-update.png)

   >[!NOTE]
   >
   >なお、メッセージプリセットをドラフトとして保存し、後で更新を再開することもできます。

変更が送信されると、メッセージプリセットは、[プリセットの作成](#create-message-preset)時と同じような検証サイクルを経ます。

>[!NOTE]
>
>編集するフィールドが「**[!UICONTROL 説明]**」、「**[!UICONTROL メールタイプ]**」または「**[!UICONTROL メールの再試行パラメーター]**」のみの場合、更新は即時に行われます。

ステータスが&#x200B;**[!UICONTROL アクティブ]**&#x200B;のメッセージプリセットの場合は、更新内容の詳細を確認できます。それには、以下の手順を実行します。

* アクティブなプリセットの名前の横に表示されている「**[!UICONTROL 最新の更新]**」アイコンをクリックします。

   ![](assets/preset-recent-update-icon.png)

* 更新の処理中に、アクティブなメッセージプリセットの更新の詳細にアクセスすることもできます。

   ![](assets/preset-view-update-details.png)

**[!UICONTROL 最新の更新]**&#x200B;画面には、更新ステータスやリクエストされた変更のリストなどの情報が表示されます。

![](assets/preset-recent-update-screen.png)

### 更新ステータス {#update-statuses}

メッセージプリセットの更新には、次のステータスがあります。

* **[!UICONTROL 処理中]**：メッセージプリセットの更新が送信され、いくつかの検証ステップを実行中です。
* **[!UICONTROL 成功]**：更新されたメッセージプリセットが検証済みであり、それを選択してメッセージを作成できます。
* **[!UICONTROL 失敗]**：メッセージプリセットの更新の検証中に、1 つ以上のチェックが失敗しました。

各ステータスについて以下で詳しく説明します。

### 処理中

いくつかの配信品質チェックが実行されて、プリセットが正しく更新されたかどうかが検証されます。

>[!NOTE]
>
>編集するフィールドが「**[!UICONTROL 説明]**」、「**[!UICONTROL メールタイプ]**」または「**[!UICONTROL メールの再試行パラメーター]**」のみの場合、更新は即時に行われます。

処理時間はおよそ **48～72 時間**&#x200B;で、最長で **7～10 営業日**&#x200B;かかることがあります。検証サイクルで実行されるチェックについて詳しくは、[この節](#create-message-preset)を参照してください。

既にアクティブになっているプリセットを編集する場合：

* 検証プロセスが進行中の間は、ステータスは&#x200B;**[!UICONTROL アクティブ]**&#x200B;のまま変わりません。

* メッセージプリセットリスト内のプリセット名の横に「**[!UICONTROL 最新の更新]**」アイコンが表示されます。

* 検証プロセス中は、このプリセットを使用してメッセージを設定しても、古いバージョンのプリセットが引き続き使用されます。

>[!NOTE]
>
>更新中は、メッセージプリセットを変更できません。名前はクリックできますが、フィールドはすべて灰色表示になっています。変更は、更新が正常に完了するまで反映されません。

### 成功 {#success}

検証プロセスが正常に完了すると、このプリセットを使用するすべてのメッセージで、新しいバージョンのプリセットが自動的に使用されます。ただし、次の待機時間が必要になることがあります。
* 単一メッセージで使用されるまでに数分間
* バッチメッセージで有効になるには、そのプリセットの次のバッチまで

### 失敗 {#failed}

検証プロセスが失敗した場合は、古いバージョンのプリセットが引き続き使用されます。

考えられる失敗理由について詳しくは、[この節](#monitor-message-presets)を参照してください。

更新が失敗すると、プリセットが再び編集可能になります。プリセットの名前をクリックし、修正する必要のある設定を更新できます。

## メッセージプリセットの非アクティブ化 {#deactivate-preset}

**[!UICONTROL アクティブ]**&#x200B;なメッセージプリセットを新しいメッセージの作成に使用できないようにするには、そのプリセットを非アクティブにします。ただし、このプリセットを使用して公開されたメッセージは影響を受けず、引き続き機能します。

>[!NOTE]
>
>更新の処理中にメッセージプリセットを非アクティブにすることはできません。更新が正常に完了するか失敗するまで待つ必要があります。詳しくは、[メッセージプリセットの編集](#edit-message-preset)およびその中の[更新ステータス](#update-statuses)を参照してください。

1. メッセージプリセットリストにアクセスします。

1. 対象となるアクティブなプリセットで、「**[!UICONTROL その他のアクション]**」ボタンをクリックします。

1. 「**[!UICONTROL 非アクティブ化]**」を選択します。

   ![](assets/preset-deactivate.png)

>[!NOTE]
>
>非アクティブ化されたメッセージプリセットは削除できません。メッセージの送信にそのプリセットを使用しているジャーニーで問題が発生しないようにするためです。

非アクティブ化されたメッセージプリセットは直接編集できません。ただし、プリセットのコピーを作成し編集して新しいバージョンを作成し、それを使用して新しいメッセージを作成することはできます。また、プリセットを再度アクティブにし、更新が正常に完了するまで待って編集することもできます。

![](assets/preset-activate.png)

## ハウツービデオ{#video-presets}

メッセージプリセットの作成方法と使用方法、サブドメインのデリゲート方法および IP プールの作成方法について説明します。

>[!VIDEO](https://video.tv.adobe.com/v/334343?quality=12)
