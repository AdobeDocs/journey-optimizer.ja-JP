---
solution: Journey Optimizer
product: journey optimizer
title: 動的コンテンツの作成
description: メッセージに動的コンテンツを追加する方法について説明します。
feature: Personalization
topic: Personalization
role: Developer
level: Intermediate
keywords: 式, エディター, 動的, コンテンツ
exl-id: 639ad7df-0d0f-4c9b-95d1-f3101267aae2
source-git-commit: 6f7b9bfb65617ee1ace3a2faaebdb24fa068d74f
workflow-type: tm+mt
source-wordcount: '654'
ht-degree: 100%

---

# 動的コンテンツの作成 {#dynamic-content}

Adobe Journey Optimizer では、ライブラリで作成した条件付きルールを活用して、メッセージに動的コンテンツを追加できます。

パーソナライゼーションエディターを使用して、パーソナライゼーションを追加できる任意のフィールドに動的コンテンツを作成できます。これには、件名行、リンク、プッシュ通知コンテンツまたはテキストタイプのオファーの表示域が含まれます。[詳しくは、パーソナライゼーションを参照してください](personalize.md)

さらに、条件付きルールを E メールデザイナーで使用して、コンテンツコンポーネントの複数のバリアントを作成できます。

## 式への動的コンテンツの追加 {#perso-expressions}

式に動的コンテンツを追加する手順は次のとおりです。

1. 動的コンテンツを追加するフィールドに移動し、パーソナライゼーションエディターを開きます。

1. **[!UICONTROL 条件]**&#x200B;メニューを選択して、使用可能な条件付きルールのリストを表示します。ルールの横にある「+」ボタンをクリックして、そのルールを現在の式に追加します。

   また、「**[!UICONTROL 新規作成]**」を選択して、新しいルールを作成することもできます。[条件の作成方法についてはこちらから](create-conditions.md)

   ![](assets/conditions-expression.png)

1. 条件付きルールが満たされた場合に表示するコンテンツを `{%if}` タグと `{%/if}` タグの間に追加します。必要な数のルールを追加して、式の複数のバリアントを作成できます。

   次の例では、受信者の優先言語に応じて、SMS コンテンツの 2 つのバリアントが作成されています。

   ![](assets/conditions-language-sample.png)

1. コンテンツの準備が整ったら、「**[!UICONTROL コンテンツをシミュレート]**」ボタンを使用して、異なるバリアントをプレビューできます。[メッセージのテストとプレビューの方法についてはこちらから](../content-management/preview-test.md)

   ![](assets/conditions-preview.png)

>[!CAUTION]
>
>条件ブロックを追加した後に E メールデザイナーが適切にレンダリングされない場合は、新しい条件の構文が正しいことと、重複または競合するステートメントが存在しないことを確認します。問題が解決しない場合は、問題のあるセクションを新しいテンプレートで再作成し、各条件ブロックを段階的にテストすることを考慮します。


## メールへの動的コンテンツの追加 {#emails}

>[!CONTEXTUALHELP]
>id="ac_conditional_content"
>title="条件付きコンテンツ"
>abstract="条件付きルールを使用すると、コンテンツコンポーネントのバリアントを複数作成できます。メッセージの送信時にどの条件も満たさなかった場合、デフォルトバリアントのコンテンツが表示されます。"

>[!CONTEXTUALHELP]
>id="ac_conditional_content_select"
>title="条件付きコンテンツ"
>abstract="ライブラリに保存されている条件付きルールを使用するか、新しい条件付きルールを作成します。"

E メールデザイナーでコンテンツコンポーネントのバリアントを作成する手順は次のとおりです。

1. [E メールデザイナー](../email/content-from-scratch.md)で、コンテンツコンポーネントを選択し、「**[!UICONTROL 条件付きコンテンツの有効化]**」をクリックします。

   ![](assets/conditions-enable-conditional.png)

1. **[!UICONTROL 条件付きコンテンツ]**&#x200B;パネルが左側に表示されます。このパネルでは、条件を使用して、選択したコンテンツコンポーネントの複数のバリアントを作成できます。

   最初のバリアントを設定するには、「**[!UICONTROL 条件を選択]**」ボタンを選択します。

   ![](assets/conditions-apply.png)

1. 条件ライブラリが表示されます。バリアントに関連付ける条件付きルールを選択し、「**[!UICONTROL 選択]**」をクリックします。この例では、受信者の優先言語に応じてコンポーネントテキストを調整します。

   ![](assets/conditions-select.png)

   また、「**[!UICONTROL 新規作成]**」をクリックして、新しいルールを作成することもできます。[条件の作成方法についてはこちらから](create-conditions.md)

1. 条件付きルールはバリアントに関連付けられます。読みやすくするために、その他のアクションアイコンから、**[!UICONTROL 名前を変更]**&#x200B;アクションを選択します。

   ![](assets/conditions-rename.png)

1. メッセージの送信時にルールが満たされた場合のコンポーネントの表示方法を設定します。この例では、受信者の優先言語がフランス語の場合、テキストをフランス語で表示します。

   ![](assets/conditions-design.png)

1. コンテンツコンポーネントに必要な数だけバリアントを追加します。異なるバリアントをいつでも切り替えて、条件付きルールに応じてコンテンツコンポーネントを表示する方法を確認できます。

   >[!NOTE]
   >
   >* メッセージの送信時にバリアントで定義されたルールがいずれも満たされない場合、コンテンツコンポーネントは、**[!UICONTROL デフォルトのバリアント]**&#x200B;に定義されたコンテンツを表示します。
   >
   >* 条件付きコンテンツは、関連付けられているルールに照らして、バリアントの表示順に評価されます。他の条件を満たさない場合は、常にデフォルトのバリアントが表示されます。
   >
   >* 複数の条件付きバリアントを含むメールの配達確認をシミュレートまたはレンダリングする際、Journey Optimizer ではより多くの処理時間が必要になる場合があります。タイムアウトやエラーメッセージが発生した場合は、バリアントの合計数を減らすか、条件ルールを簡素化することを考慮します。コンテンツのテストについて詳しくは、[このページ](../content-management/preview-test.md)を参照してください。


1. バリアントを削除するには、目的のバリアントの横にある「その他のアクション」アイコンをクリックし、「**[!UICONTROL 削除]**」を選択します。

   ![](assets/conditions-delete.png)
